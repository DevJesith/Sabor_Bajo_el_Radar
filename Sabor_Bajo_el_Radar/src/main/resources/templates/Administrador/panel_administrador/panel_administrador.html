<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Menú Lateral con Botón Dinámico</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"/>
    <link th:href="@{/css/administrador/profile_admin.css}" rel="stylesheet"/>
    <script th:src="@{https://cdn.jsdelivr.net/npm/chart.js}"></script>

</head>
<body>
<!-- Botón ☰ para abrir el menú -->
<button id="menuBtn" class="btn btn-primary" onclick="openSidebar()">☰</button>

<!-- Menú lateral -->
<div id="sidebar" class="p-3">
    <button id="closeBtn" onclick="closeSidebar()">✖</button>
    <h4 class="mt-4">Panel de administrador</h4>
    <ul class="nav flex-column mt-3">
        <li class="nav-item"><a class="nav-link" th:href="@{/}">Inicio</a></li>
        <li class="nav-item"><a class="nav-link" th:href="@{/dashboard/admin}">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" th:href="@{/usuarios/lista}">Usuarios</a></li>
        <li class="nav-item"><a class="nav-link" th:href="@{/correo-masivos}">Correos masivos</a></li>
    </ul>
</div>

<!-- Contenido principal -->
<div id="content" class="text-center">
    <h1>Bienvenido a tu plataforma</h1>
    <p>Gestiona tus pedidos, visualiza estadísticas y conecta con vendedores locales.</p>
</div>

<div class="container my-4">
    <div class="row row-cols-1 row-cols-md-2 g-4">
        <!-- Tarjeta de gráfica -->
        <div class="col">
            <div class="card shadow-sm p-4 border border-primary bg-light">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">Gráfica de ventas</h5>
                    <div class="dropdown">
                        <button
                            class="btn btn-outline-primary dropdown-toggle"
                            type="button"
                            data-bs-toggle="dropdown">
                            Exportar
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="exportPDF('lineaVentas', 'grafica_ventas')">PDF</a>
                            </li>
                            <li><a class="dropdown-item" href="#"
                                   onclick="exportExcel('lineaVentas', 'grafica_ventas')">Excel</a></li>
                            <li><a class="dropdown-item" href="#" onclick="exportWord('lineaVentas', 'grafica_ventas')">Word</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="exportPNG('lineaVentas', 'grafica_ventas')">PNG</a>
                            </li>
                            <li><a class="dropdown-item" th:href="@{/api/dashboard/ventas}">Web Services (datos)</a>
                        
                        </ul>
                    </div>
                </div>
                <canvas id="lineaVentas" style="max-height: 300px; width: 100%"></canvas>
            </div>
        </div>
        
        <!-- Repite para cada gráfica -->
        <div class="col">
            <div class="card shadow-sm p-4 border border-primary bg-light">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">Gráfica usuarios</h5>
                    <div class="dropdown">
                        <button
                            class="btn btn-outline-primary dropdown-toggle"
                            type="button"
                            data-bs-toggle="dropdown">
                            Exportar
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="exportPDF('usuarios', 'grafica_usuarios')">PDF</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="exportExcel('usuarios', 'grafica_usuarios')">Excel</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="exportWord('usuarios', 'grafica_usuarios')">Word</a>
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="exportPNG('usuarios', 'grafica_usuarios')">PNG</a>
                            </li>
                            <li><a class="dropdown-item" th:href="@{/api/dashboard/usuarios}">Web Services (datos)</a>
                        
                        </ul>
                    </div>
                </div>
                <canvas id="usuarios" style="max-height: 300px; width: 100%"></canvas>
            </div>
        </div>
        
        <div class="col">
            <div class="card shadow-sm p-4 border border-primary bg-light">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">Compras por categorias</h5>
                    <div class="dropdown">
                        <button
                            class="btn btn-outline-primary dropdown-toggle"
                            type="button"
                            data-bs-toggle="dropdown">
                            Exportar
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#"
                                   onclick="exportPDF('categoriaVenta', 'grafica_categoriaVenta')">PDF</a></li>
                            <li><a class="dropdown-item" href="#"
                                   onclick="exportExcel('categoriaVenta', 'grafica_categoriaVenta')">Excel</a></li>
                            <li><a class="dropdown-item" href="#"
                                   onclick="exportWord('categoriaVenta', 'grafica_categoriaVenta')">Word</a></li>
                            <li><a class="dropdown-item" href="#"
                                   onclick="exportPNG('categoriaVenta', 'grafica_categoriaVenta')">PNG</a></li>
                            <li><a class="dropdown-item" th:href="@{/api/dashboard/ingresos-categorias}">Web Services
                                (datos)</a>
                        
                        </ul>
                    </div>
                </div>
                <canvas id="categoriaVenta" style="max-height: 300px; width: 100%"></canvas>
            </div>
        </div>
        
        <div class="col">
            <div class="card shadow-sm p-4 border border-primary bg-light">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">Usuarios en localidades</h5>
                    <div class="dropdown">
                        <button
                            class="btn btn-outline-primary dropdown-toggle"
                            type="button"
                            data-bs-toggle="dropdown">
                            Exportar
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item"
                                   onclick="exportPDF('localidades', 'grafica_localidades')">PDF</a><a
                                class="dropdown-item"
                                onclick="exportExcel('localidades', 'grafica_localidades')">Excel</a></li>
                            <li><a class="dropdown-item"
                                   onclick="exportWord('localidades', 'grafica_localidades')">Word</a></li>
                            <li><a class="dropdown-item"
                                   onclick="exportPNG('localidades', 'grafica_localidades')">PNG</a></li>
                            <li><a class="dropdown-item" th:href="@{/api/dashboard/localidades}">Web Services
                                (datos)</a>
                        
                        </ul>
                    </div>
                </div>
                <canvas id="localidades" style="max-height: 300px; width: 100%"></canvas>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/admin/profile_admin_custom.js}"></script>
<!-- Incluye la librería Chart.js -->
<script th:src="@{/js/admin/dashboard/grafica_linea_ventas.js}"></script>
<!-- Tu script JavaScript -->
<script th:src="@{/js/admin/dashboard/grafico_barra_usuarios.js}"></script>
<script th:src="@{/js/admin/dashboard/grafico_circular_categoriaVentas.js}"></script>
<script th:src="@{/js/admin/dashboard/grafico_circular_localidades.js}"></script>
<!-- Librería jsPDF para exportar a PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- Librería SheetJS para exportar a Excel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<script th:src="@{/js/admin/dashboard/exportarGraficas.js}"></script>

</body>
</html>
